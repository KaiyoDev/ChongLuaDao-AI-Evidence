<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cấu hình - ChongLuaDao AI Evidence</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
</head>
<body class="options-page">


  <div class="header shimmer-effect">
    <h2 class="gradient-text">⚙️ Cấu hình Extension</h2>
    <p class="subtitle">Thiết lập API Gemini và tùy chọn upload</p>
  </div>

  <div class="config-section">
    <h3>🤖 Cấu hình Google Gemini API</h3>
    <div class="form-group">
      <label for="geminiApiKeys">API Keys * (Mỗi dòng 1 key)</label>
      <textarea 
        id="geminiApiKeys" 
        rows="5" 
        placeholder="AIzaSyB1234567890abcdefghijklmnopqrstuvwxyz&#10;AIzaSyC0987654321zyxwvutsrqponmlkjihgfedcba&#10;AIzaSyDabcdefghijklmnopqrstuvwxyz1234567890" 
        required
      ></textarea>
      <small class="help-text">
        Nhập nhiều API keys (khuyến nghị 3-5 keys) để tránh limit. Mỗi dòng 1 key.<br>
        Lấy API key tại: <a href="https://makersuite.google.com/app/apikey" target="_blank" rel="noopener">Google AI Studio</a>
      </small>
    </div>

    <div class="form-group">
      <label for="geminiModel">Model AI</label>
      <select id="geminiModel">
        <option value="gemini-1.5-pro">gemini-1.5-pro (Khuyên dùng)</option>
        <option value="gemini-2.0-flash">gemini-2.0-flash (Nhanh hơn)</option>
        <option value="gemini-pro-vision">gemini-pro-vision</option>
      </select>
      <small class="help-text">Model gemini-1.5-pro cho kết quả tốt nhất</small>
    </div>

    <div class="form-group">
      <label for="geminiEndpointBase">Endpoint Base (Tùy chọn)</label>
      <input 
        id="geminiEndpointBase" 
        type="url"
        placeholder="https://generativelanguage.googleapis.com" 
      />
      <small class="help-text">Để trống sẽ dùng endpoint mặc định của Google</small>
    </div>
  </div>



  <div class="config-section">
    <h3>📝 Cấu hình Form Auto-Fill</h3>
    <div class="form-group">
      <label for="userEmail">Email của bạn (tùy chọn)</label>
      <input 
        id="userEmail" 
        type="email"
        placeholder="email@example.com" 
      />
      <small class="help-text">
        Email sẽ được tự động điền khi báo cáo lên ChongLuaDao
      </small>
    </div>
  </div>

  <div class="config-section">
    <h3>🔍 Cấu hình Kiểm tra Tự động</h3>
    <div class="form-group">
      <label class="checkbox-label">
        <input type="checkbox" id="autoCheckUrl" />
        <span>Tự động kiểm tra URL khi truy cập trang web</span>
      </label>
      <small class="help-text">
        Khi bật, extension sẽ tự động kiểm tra URL qua API https://kaiyobot.gis-humg.com/api/checkurl 
        khi bạn truy cập trang web mới và hiển thị cảnh báo nếu phát hiện rủi ro.
        <br><br>
        <strong>Lưu ý:</strong> 
        • Chỉ kiểm tra mỗi URL một lần trong phiên để tránh spam
        • Tính năng này hoạt động độc lập với quét AI
        • Bạn vẫn có thể quét thủ công bằng nút "Quét trang web" trong popup để phân tích chi tiết bằng AI
      </small>
    </div>
  </div>

  <div class="config-section">
    <h3>📤 Cấu hình Upload Ảnh</h3>
    <div class="form-group">
      <label for="apiHeaders">Headers tùy chỉnh (JSON)</label>
      <textarea 
        id="apiHeaders" 
        rows="6" 
        placeholder='{
  "Authorization": "Bearer your-token",
  "X-Custom-Header": "value"
}'
      ></textarea>
      <small class="help-text">
        Thêm header xác thực nếu API upload yêu cầu. Để trống nếu không cần.
      </small>
    </div>
  </div>

  <div class="config-section">
    <h3>ℹ️ Thông tin</h3>
    <div class="info-box">
      <p><strong>🎯 Chức năng:</strong></p>
      <ul>
        <li>Chụp màn hình trang web hiện tại</li>
        <li>Phân tích bằng AI Gemini để phát hiện lừa đảo</li>
        <li>Vẽ chú thích bằng chứng lên ảnh</li>
        <li>Upload ảnh lên server ChongLuaDao.vn</li>
        <li>Lưu lịch sử phân tích cục bộ</li>
      </ul>
      
      <p><strong>🔒 Bảo mật:</strong></p>
      <ul>
        <li>API key chỉ lưu trên máy bạn</li>
        <li>Không gửi dữ liệu cho bên thứ ba khác</li>
        <li>Ảnh upload qua HTTPS an toàn</li>
      </ul>
    </div>
  </div>

  <div class="button-group">
    <button id="save" class="primary-btn shimmer-effect">
      <span class="btn-icon">💾</span>
      <div class="btn-content">
        <div class="btn-title">Lưu cấu hình</div>
        <div class="btn-subtitle">Lưu tất cả thiết lập</div>
      </div>
    </button>
    <button id="test" class="secondary-btn shimmer-effect">
      <span class="btn-icon">🧪</span>
      <div class="btn-content">
        <div class="btn-title">Test API</div>
        <div class="btn-subtitle">Kiểm tra kết nối</div>
      </div>
    </button>
  </div>

  <div id="status" class="status"></div>

  <!-- Toast Container -->
  <div id="toastContainer" class="toast-container"></div>

  <script src="options.js"></script>
</body>
</html>
