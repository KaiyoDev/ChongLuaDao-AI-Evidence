<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ChongLuaDao AI Evidence</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>


  <!-- Emergency Reset Button -->
  <button class="emergency-reset" id="emergencyReset" title="Reset extension (ESC)">
    <span>üîÑ</span>
  </button>

  <!-- Header Section -->
  <header class="modern-header">
    <div class="header-content">
      <div class="logo-section">
        <div class="app-logo">üõ°Ô∏è</div>
        <div class="app-info">
          <h1 class="app-title">ChongLuaDao AI</h1>
          <p class="app-subtitle">Evidence Generator</p>
        </div>
        <div class="header-toggle" title="B·∫≠t/t·∫Øt t·ª± ƒë·ªông ki·ªÉm tra URL">
          <label class="toggle-switch tiny">
            <input type="checkbox" id="autoCheckUrlToggle">
            <span class="toggle-slider"></span>
          </label>
        </div>
      </div>
      <div class="status-indicator" id="connectionStatus">
        <div class="status-dot"></div>
        <span class="status-text">S·∫µn s√†ng</span>
      </div>
    </div>
  </header>

  <!-- Main Content Area -->
  <main class="main-content">
    
    <!-- Quick Actions Section -->
    <section class="quick-actions-section">
      <h2 class="section-title">üöÄ H√†nh ƒë·ªông nhanh</h2>
      <div class="action-grid">
        <button id="run" class="action-card primary-action" data-action="full-scan">
          <div class="action-icon">üì∏</div>
          <div class="action-content">
            <h3>Qu√©t to√†n trang</h3>
            <p>Ph√¢n t√≠ch AI chuy√™n s√¢u</p>
          </div>
          <div class="action-arrow">‚Üí</div>
        </button>
        
        <button id="runQuick" class="action-card secondary-action" data-action="quick-scan">
          <div class="action-icon">‚ö°</div>
          <div class="action-content">
            <h3>Qu√©t nhanh</h3>
            <p>Ph√¢n t√≠ch viewport hi·ªán t·∫°i</p>
          </div>
          <div class="action-arrow">‚Üí</div>
        </button>
      </div>
    </section>

    <!-- Tools Section -->
    <section class="tools-section">
      <h2 class="section-title">üîß C√¥ng c·ª•</h2>
      <div class="tools-grid">
        <button id="history" class="tool-card" data-tool="history">
          <div class="tool-icon">üìú</div>
          <div class="tool-content">
            <h4>L·ªãch s·ª≠</h4>
            <span class="tool-desc">Xem ph√¢n t√≠ch ƒë√£ th·ª±c hi·ªán</span>
          </div>
        </button>
        
        <a href="options.html" target="_blank" class="tool-card" data-tool="settings">
          <div class="tool-icon">‚öôÔ∏è</div>
          <div class="tool-content">
            <h4>C√†i ƒë·∫∑t</h4>
            <span class="tool-desc">C·∫•u h√¨nh API & t√πy ch·ªçn</span>
          </div>
        </a>
        
        <button id="exportHistory" class="tool-card" data-tool="export">
          <div class="tool-icon">üì§</div>
          <div class="tool-content">
            <h4>Xu·∫•t d·ªØ li·ªáu</h4>
            <span class="tool-desc">T·∫£i v·ªÅ b√°o c√°o</span>
          </div>
        </button>
        
        <button id="clear" class="tool-card danger-tool" data-tool="clear">
          <div class="tool-icon">üóëÔ∏è</div>
          <div class="tool-content">
            <h4>X√≥a d·ªØ li·ªáu</h4>
            <span class="tool-desc">L√†m s·∫°ch l·ªãch s·ª≠</span>
          </div>
        </button>
      </div>
    </section>

    <!-- Progress Section -->
    <section id="progressSection" class="progress-section" hidden>
      <div class="progress-header">
        <h3>üîÑ ƒêang ph√¢n t√≠ch...</h3>
        <button class="cancel-btn" id="cancelAnalysis" title="H·ªßy ph√¢n t√≠ch">‚úï</button>
      </div>
      
      <div class="progress-timeline">
        <div class="timeline-step active" data-step="1">
          <div class="step-indicator">
            <div class="step-icon">üì∏</div>
          </div>
          <div class="step-info">
            <h4>Ch·ª•p ·∫£nh</h4>
            <p>Capturing screenshots...</p>
          </div>
        </div>
        
        <div class="timeline-step" data-step="2">
          <div class="step-indicator">
            <div class="step-icon">ü§ñ</div>
          </div>
          <div class="step-info">
            <h4>AI ph√¢n t√≠ch</h4>
            <p>AI analyzing content...</p>
          </div>
        </div>
        
        <div class="timeline-step" data-step="3">
          <div class="step-indicator">
            <div class="step-icon">üé®</div>
          </div>
          <div class="step-info">
            <h4>T·∫°o ch√∫ th√≠ch</h4>
            <p>Generating annotations...</p>
          </div>
        </div>
        
        <div class="timeline-step" data-step="4">
          <div class="step-indicator">
            <div class="step-icon">‚òÅÔ∏è</div>
          </div>
          <div class="step-info">
            <h4>Upload</h4>
            <p>Uploading evidence...</p>
          </div>
        </div>
      </div>
      
      <div class="progress-bar-container">
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill"></div>
        </div>
        <div class="progress-percentage" id="progressPercentage">0%</div>
      </div>
      
      <div class="progress-status" id="progressText">ƒêang kh·ªüi t·∫°o...</div>
    </section>

    <!-- Results Section -->
    <section id="result" class="results-section" hidden>
      <div class="results-header">
        <div class="results-title">
          <h3>üìä K·∫øt qu·∫£ ph√¢n t√≠ch</h3>
          <div class="risk-badge" id="riskBadge">
            <span class="risk-level">0</span>
            <span class="risk-text">ƒêang ph√¢n t√≠ch...</span>
          </div>
        </div>
        
        <div class="results-actions">
          <button id="copyReport" class="action-btn copy-btn" title="Copy b√°o c√°o">
            <span class="btn-icon">üìã</span>
          </button>
          <button id="fillForm" class="action-btn fill-btn" title="ƒêi·ªÅn form t·ª± ƒë·ªông">
            <span class="btn-icon">üìù</span>
          </button>
          <button id="expandResult" class="action-btn expand-btn" title="Xem chi ti·∫øt">
            <span class="btn-icon">üîç</span>
          </button>
          <button id="openResultTab" class="action-btn tab-btn" title="M·ªü tab ri√™ng">
            <span class="btn-icon">üöÄ</span>
          </button>
        </div>
      </div>

      <div class="results-content">
        <div class="result-summary" id="resultSummary">
          <div class="summary-skeleton">
            <div class="skeleton-line"></div>
            <div class="skeleton-line short"></div>
            <div class="skeleton-line"></div>
          </div>
        </div>
        
        <div class="result-details" id="resultDetails" hidden>
          <div class="details-tabs">
            <button class="tab-btn active" data-tab="overview">T·ªïng quan</button>
            <button class="tab-btn" data-tab="findings">Ph√°t hi·ªán</button>
            <button class="tab-btn" data-tab="evidence">B·∫±ng ch·ª©ng</button>
          </div>
          <div class="tab-content">
            <div id="tab-overview" class="tab-panel active">
              <pre id="resultData"></pre>
            </div>
            <div id="tab-findings" class="tab-panel">
              <div id="findingsList"></div>
            </div>
            <div id="tab-evidence" class="tab-panel">
              <div id="evidenceList"></div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- History Section -->
    <section id="historyList" class="history-section" hidden>
      <div class="history-header">
        <h3>üìú L·ªãch s·ª≠ ph√¢n t√≠ch</h3>
        <div class="history-stats" id="historyStats">
          <span class="stat-item">
            <span class="stat-number" id="totalScans">0</span>
            <span class="stat-label">L·∫ßn qu√©t</span>
          </span>
          <span class="stat-item">
            <span class="stat-number" id="highRiskScans">0</span>
            <span class="stat-label">R·ªßi ro cao</span>
          </span>
        </div>
      </div>
      
      <div class="history-content">
        <div class="history-list" id="historyData">
          <div class="history-placeholder">
            <div class="placeholder-icon">üìã</div>
            <p>Ch∆∞a c√≥ l·ªãch s·ª≠ ph√¢n t√≠ch n√†o</p>
            <button class="placeholder-action" onclick="document.getElementById('run').click()">
              B·∫Øt ƒë·∫ßu qu√©t
            </button>
          </div>
        </div>
      </div>
    </section>

  </main>

  <script src="popup.js"></script>
</body>
</html>
